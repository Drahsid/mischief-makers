glabel func_80054320
/* 54F20 80054320 27BDFFD8 */  addiu      $sp, $sp, -0x28
/* 54F24 80054324 AFB00014 */  sw         $s0, 0x14($sp)
/* 54F28 80054328 3090FFFF */  andi       $s0, $a0, 0xffff
/* 54F2C 8005432C 00107080 */  sll        $t6, $s0, 2
/* 54F30 80054330 01D07023 */  subu       $t6, $t6, $s0
/* 54F34 80054334 000E7080 */  sll        $t6, $t6, 2
/* 54F38 80054338 01D07021 */  addu       $t6, $t6, $s0
/* 54F3C 8005433C 000E7080 */  sll        $t6, $t6, 2
/* 54F40 80054340 01D07023 */  subu       $t6, $t6, $s0
/* 54F44 80054344 3C0F800F */  lui        $t7, %hi(D_800EF510)
/* 54F48 80054348 25EFF510 */  addiu      $t7, $t7, %lo(D_800EF510)
/* 54F4C 8005434C 000E70C0 */  sll        $t6, $t6, 3
/* 54F50 80054350 01CF1021 */  addu       $v0, $t6, $t7
/* 54F54 80054354 905800D0 */  lbu        $t8, 0xd0($v0)
/* 54F58 80054358 AFBF001C */  sw         $ra, 0x1c($sp)
/* 54F5C 8005435C AFB10018 */  sw         $s1, 0x18($sp)
/* 54F60 80054360 AFA40028 */  sw         $a0, 0x28($sp)
/* 54F64 80054364 1700003E */  bnez       $t8, .L80054460
/* 54F68 80054368 AFA5002C */   sw        $a1, 0x2c($sp)
/* 54F6C 8005436C 24190001 */  addiu      $t9, $zero, 1
/* 54F70 80054370 97A5002E */  lhu        $a1, 0x2e($sp)
/* 54F74 80054374 A05900D0 */  sb         $t9, 0xd0($v0)
/* 54F78 80054378 3204FFFF */  andi       $a0, $s0, 0xffff
/* 54F7C 8005437C 0C013D45 */  jal        func_8004F514
/* 54F80 80054380 AFA20020 */   sw        $v0, 0x20($sp)
/* 54F84 80054384 97A8002E */  lhu        $t0, 0x2e($sp)
/* 54F88 80054388 3C0A800F */  lui        $t2, 0x800f
/* 54F8C 8005438C 00084880 */  sll        $t1, $t0, 2
/* 54F90 80054390 01284823 */  subu       $t1, $t1, $t0
/* 54F94 80054394 00094880 */  sll        $t1, $t1, 2
/* 54F98 80054398 01284821 */  addu       $t1, $t1, $t0
/* 54F9C 8005439C 00094880 */  sll        $t1, $t1, 2
/* 54FA0 800543A0 01284823 */  subu       $t1, $t1, $t0
/* 54FA4 800543A4 000948C0 */  sll        $t1, $t1, 3
/* 54FA8 800543A8 254AF510 */  addiu      $t2, $t2, -0xaf0
/* 54FAC 800543AC 012A8821 */  addu       $s1, $t1, $t2
/* 54FB0 800543B0 8E2B0098 */  lw         $t3, 0x98($s1)
/* 54FB4 800543B4 3C010001 */  lui        $at, 1
/* 54FB8 800543B8 01616025 */  or         $t4, $t3, $at
/* 54FBC 800543BC AE2C0098 */  sw         $t4, 0x98($s1)
/* 54FC0 800543C0 0C016249 */  jal        func_80058924
/* 54FC4 800543C4 3204FFFF */   andi      $a0, $s0, 0xffff
/* 54FC8 800543C8 8FA20020 */  lw         $v0, 0x20($sp)
/* 54FCC 800543CC 3C190003 */  lui        $t9, 3
/* 54FD0 800543D0 8C4D0080 */  lw         $t5, 0x80($v0)
/* 54FD4 800543D4 3204FFFF */  andi       $a0, $s0, 0xffff
/* 54FD8 800543D8 31AE0020 */  andi       $t6, $t5, 0x20
/* 54FDC 800543DC 15C00005 */  bnez       $t6, .L800543F4
/* 54FE0 800543E0 2405003C */   addiu     $a1, $zero, 0x3c
/* 54FE4 800543E4 3C0FFFFE */  lui        $t7, 0xfffe
/* 54FE8 800543E8 35EF8000 */  ori        $t7, $t7, 0x8000
/* 54FEC 800543EC 10000004 */  b          .L80054400
/* 54FF0 800543F0 AC4F00F8 */   sw        $t7, 0xf8($v0)
.L800543F4:
/* 54FF4 800543F4 3C180001 */  lui        $t8, 1
/* 54FF8 800543F8 37188000 */  ori        $t8, $t8, 0x8000
/* 54FFC 800543FC AC5800F8 */  sw         $t8, 0xf8($v0)
.L80054400:
/* 55000 80054400 0C017154 */  jal        func_8005C550
/* 55004 80054404 AC5900FC */   sw        $t9, 0xfc($v0)
/* 55008 80054408 862500E4 */  lh         $a1, 0xe4($s1)
/* 5500C 8005440C 0C015CE7 */  jal        func_8005739C
/* 55010 80054410 3204FFFF */   andi      $a0, $s0, 0xffff
/* 55014 80054414 28410003 */  slti       $at, $v0, 3
/* 55018 80054418 14200009 */  bnez       $at, .L80054440
/* 5501C 8005441C 3204FFFF */   andi      $a0, $s0, 0xffff
/* 55020 80054420 0C015D70 */  jal        func_800575C0
/* 55024 80054424 AFA20024 */   sw        $v0, 0x24($sp)
/* 55028 80054428 8FA30024 */  lw         $v1, 0x24($sp)
/* 5502C 8005442C 24010003 */  addiu      $at, $zero, 3
/* 55030 80054430 14610003 */  bne        $v1, $at, .L80054440
/* 55034 80054434 00000000 */   nop
/* 55038 80054438 0C000CD3 */  jal        func_8000334C
/* 5503C 8005443C 2404003C */   addiu     $a0, $zero, 0x3c
.L80054440:
/* 55040 80054440 922800DB */  lbu        $t0, 0xdb($s1)
/* 55044 80054444 3C19800D */  lui        $t9, %hi(D_800D3F70)
/* 55048 80054448 00084880 */  sll        $t1, $t0, 2
/* 5504C 8005444C 0329C821 */  addu       $t9, $t9, $t1
/* 55050 80054450 8F393F70 */  lw         $t9, %lo(D_800D3F70)($t9)
/* 55054 80054454 97A5002E */  lhu        $a1, 0x2e($sp)
/* 55058 80054458 0320F809 */  jalr       $t9
/* 5505C 8005445C 3204FFFF */   andi      $a0, $s0, 0xffff
.L80054460:
/* 55060 80054460 8FBF001C */  lw         $ra, 0x1c($sp)
/* 55064 80054464 8FB00014 */  lw         $s0, 0x14($sp)
/* 55068 80054468 8FB10018 */  lw         $s1, 0x18($sp)
/* 5506C 8005446C 03E00008 */  jr         $ra
/* 55070 80054470 27BD0028 */   addiu     $sp, $sp, 0x28
