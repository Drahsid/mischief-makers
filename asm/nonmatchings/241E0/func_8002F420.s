glabel func_8002F420
/* 30020 8002F420 27BDFFC0 */  addiu      $sp, $sp, -0x40
/* 30024 8002F424 AFBE0038 */  sw         $fp, 0x38($sp)
/* 30028 8002F428 AFB5002C */  sw         $s5, 0x2c($sp)
/* 3002C 8002F42C 309EFFFF */  andi       $fp, $a0, 0xffff
/* 30030 8002F430 AFB1001C */  sw         $s1, 0x1c($sp)
/* 30034 8002F434 3C03800C */  lui        $v1, %hi(D_800BCCD0)
/* 30038 8002F438 3C02800C */  lui        $v0, %hi(D_800BE4E0)
/* 3003C 8002F43C 9442E4E0 */  lhu        $v0, %lo(D_800BE4E0)($v0)
/* 30040 8002F440 2463CCD0 */  addiu      $v1, $v1, %lo(D_800BCCD0)
/* 30044 8002F444 3C15800F */  lui        $s5, %hi(D_800EF510)
/* 30048 8002F448 26B5F510 */  addiu      $s5, $s5, %lo(D_800EF510)
/* 3004C 8002F44C 86AA0088 */  lh         $t2, 0x88($s5)
/* 30050 8002F450 001EC080 */  sll        $t8, $fp, 2
/* 30054 8002F454 448A9000 */  mtc1       $t2, $f18
/* 30058 8002F458 000270C0 */  sll        $t6, $v0, 3
/* 3005C 8002F45C 468094A0 */  cvt.s.w    $f18, $f18
/* 30060 8002F460 031EC023 */  subu       $t8, $t8, $fp
/* 30064 8002F464 31C2FFFF */  andi       $v0, $t6, 0xffff
/* 30068 8002F468 0018C080 */  sll        $t8, $t8, 2
/* 3006C 8002F46C 031EC021 */  addu       $t8, $t8, $fp
/* 30070 8002F470 0018C080 */  sll        $t8, $t8, 2
/* 30074 8002F474 031EC023 */  subu       $t8, $t8, $fp
/* 30078 8002F478 0018C0C0 */  sll        $t8, $t8, 3
/* 3007C 8002F47C 02B88821 */  addu       $s1, $s5, $t8
/* 30080 8002F480 C630012C */  lwc1       $f16, 0x12c($s1)
/* 30084 8002F484 305903FF */  andi       $t9, $v0, 0x3ff
/* 30088 8002F488 00194080 */  sll        $t0, $t9, 2
/* 3008C 8002F48C 00684821 */  addu       $t1, $v1, $t0
/* 30090 8002F490 C52E0000 */  lwc1       $f14, ($t1)
/* 30094 8002F494 244DFF00 */  addiu      $t5, $v0, -0x100
/* 30098 8002F498 460E8382 */  mul.s      $f14, $f16, $f14
/* 3009C 8002F49C AFB40028 */  sw         $s4, 0x28($sp)
/* 300A0 8002F4A0 31AE03FF */  andi       $t6, $t5, 0x3ff
/* 300A4 8002F4A4 000E7880 */  sll        $t7, $t6, 2
/* 300A8 8002F4A8 46127480 */  add.s      $f18, $f14, $f18
/* 300AC 8002F4AC 006FC021 */  addu       $t8, $v1, $t7
/* 300B0 8002F4B0 444BF800 */  cfc1       $t3, $31
/* 300B4 8002F4B4 C70E0000 */  lwc1       $f14, ($t8)
/* 300B8 8002F4B8 35610003 */  ori        $at, $t3, 3
/* 300BC 8002F4BC 38210002 */  xori       $at, $at, 2
/* 300C0 8002F4C0 44C1F800 */  ctc1       $at, $31
/* 300C4 8002F4C4 86340156 */  lh         $s4, 0x156($s1)
/* 300C8 8002F4C8 460094A4 */  cvt.w.s    $f18, $f18
/* 300CC 8002F4CC AFBF003C */  sw         $ra, 0x3c($sp)
/* 300D0 8002F4D0 44CBF800 */  ctc1       $t3, $31
/* 300D4 8002F4D4 440C9000 */  mfc1       $t4, $f18
/* 300D8 8002F4D8 460E8382 */  mul.s      $f14, $f16, $f14
/* 300DC 8002F4DC A62C0088 */  sh         $t4, 0x88($s1)
/* 300E0 8002F4E0 86B9008C */  lh         $t9, 0x8c($s5)
/* 300E4 8002F4E4 AFB70034 */  sw         $s7, 0x34($sp)
/* 300E8 8002F4E8 44998000 */  mtc1       $t9, $f16
/* 300EC 8002F4EC AFB60030 */  sw         $s6, 0x30($sp)
/* 300F0 8002F4F0 46808420 */  cvt.s.w    $f16, $f16
/* 300F4 8002F4F4 AFB30024 */  sw         $s3, 0x24($sp)
/* 300F8 8002F4F8 AFB20020 */  sw         $s2, 0x20($sp)
/* 300FC 8002F4FC 46107400 */  add.s      $f16, $f14, $f16
/* 30100 8002F500 240A0008 */  addiu      $t2, $zero, 8
/* 30104 8002F504 4448F800 */  cfc1       $t0, $31
/* 30108 8002F508 AFB00018 */  sw         $s0, 0x18($sp)
/* 3010C 8002F50C 35010003 */  ori        $at, $t0, 3
/* 30110 8002F510 38210002 */  xori       $at, $at, 2
/* 30114 8002F514 44C1F800 */  ctc1       $at, $31
/* 30118 8002F518 AFA40040 */  sw         $a0, 0x40($sp)
/* 3011C 8002F51C 46008424 */  cvt.w.s    $f16, $f16
/* 30120 8002F520 A62A0090 */  sh         $t2, 0x90($s1)
/* 30124 8002F524 44C8F800 */  ctc1       $t0, $31
/* 30128 8002F528 44098000 */  mfc1       $t1, $f16
/* 3012C 8002F52C 06800053 */  bltz       $s4, .L8002F67C
/* 30130 8002F530 A629008C */   sh        $t1, 0x8c($s1)
.L8002F534:
/* 30134 8002F534 0C00A14A */  jal        func_80028528
/* 30138 8002F538 00409825 */   or        $s3, $v0, $zero
/* 3013C 8002F53C 10400047 */  beqz       $v0, .L8002F65C
/* 30140 8002F540 3052FFFF */   andi      $s2, $v0, 0xffff
/* 30144 8002F544 00125880 */  sll        $t3, $s2, 2
/* 30148 8002F548 01725823 */  subu       $t3, $t3, $s2
/* 3014C 8002F54C 000B5880 */  sll        $t3, $t3, 2
/* 30150 8002F550 01725821 */  addu       $t3, $t3, $s2
/* 30154 8002F554 000B5880 */  sll        $t3, $t3, 2
/* 30158 8002F558 01725823 */  subu       $t3, $t3, $s2
/* 3015C 8002F55C 2678FF00 */  addiu      $t8, $s3, -0x100
/* 30160 8002F560 000B58C0 */  sll        $t3, $t3, 3
/* 30164 8002F564 331903FF */  andi       $t9, $t8, 0x3ff
/* 30168 8002F568 326D03FF */  andi       $t5, $s3, 0x3ff
/* 3016C 8002F56C 3C0F800C */  lui        $t7, %hi(D_800BCCD0)
/* 30170 8002F570 02AB8021 */  addu       $s0, $s5, $t3
/* 30174 8002F574 240C0034 */  addiu      $t4, $zero, 0x34
/* 30178 8002F578 25EFCCD0 */  addiu      $t7, $t7, %lo(D_800BCCD0)
/* 3017C 8002F57C 000D7080 */  sll        $t6, $t5, 2
/* 30180 8002F580 00194080 */  sll        $t0, $t9, 2
/* 30184 8002F584 A60C00D2 */  sh         $t4, 0xd2($s0)
/* 30188 8002F588 010FB821 */  addu       $s7, $t0, $t7
/* 3018C 8002F58C 01CFB021 */  addu       $s6, $t6, $t7
/* 30190 8002F590 0C0078B4 */  jal        func_8001E2D0
/* 30194 8002F594 3244FFFF */   andi      $a0, $s2, 0xffff
/* 30198 8002F598 96290094 */  lhu        $t1, 0x94($s1)
/* 3019C 8002F59C 33C4FFFF */  andi       $a0, $fp, 0xffff
/* 301A0 8002F5A0 A6090094 */  sh         $t1, 0x94($s0)
/* 301A4 8002F5A4 962A0084 */  lhu        $t2, 0x84($s1)
/* 301A8 8002F5A8 3245FFFF */  andi       $a1, $s2, 0xffff
/* 301AC 8002F5AC A60A0084 */  sh         $t2, 0x84($s0)
/* 301B0 8002F5B0 922B009F */  lbu        $t3, 0x9f($s1)
/* 301B4 8002F5B4 00000000 */  nop
/* 301B8 8002F5B8 A20B009F */  sb         $t3, 0x9f($s0)
/* 301BC 8002F5BC 8E2C018C */  lw         $t4, 0x18c($s1)
/* 301C0 8002F5C0 0C00C756 */  jal        func_80031D58
/* 301C4 8002F5C4 AE0C018C */   sw        $t4, 0x18c($s0)
/* 301C8 8002F5C8 86AD0088 */  lh         $t5, 0x88($s5)
/* 301CC 8002F5CC C624012C */  lwc1       $f4, 0x12c($s1)
/* 301D0 8002F5D0 C6C60000 */  lwc1       $f6, ($s6)
/* 301D4 8002F5D4 448D5000 */  mtc1       $t5, $f10
/* 301D8 8002F5D8 46062202 */  mul.s      $f8, $f4, $f6
/* 301DC 8002F5DC 46805420 */  cvt.s.w    $f16, $f10
/* 301E0 8002F5E0 C6EA0000 */  lwc1       $f10, ($s7)
/* 301E4 8002F5E4 46104480 */  add.s      $f18, $f8, $f16
/* 301E8 8002F5E8 444EF800 */  cfc1       $t6, $31
/* 301EC 8002F5EC 00000000 */  nop
/* 301F0 8002F5F0 35C10003 */  ori        $at, $t6, 3
/* 301F4 8002F5F4 38210002 */  xori       $at, $at, 2
/* 301F8 8002F5F8 44C1F800 */  ctc1       $at, $31
/* 301FC 8002F5FC 00000000 */  nop
/* 30200 8002F600 46009124 */  cvt.w.s    $f4, $f18
/* 30204 8002F604 44182000 */  mfc1       $t8, $f4
/* 30208 8002F608 44CEF800 */  ctc1       $t6, $31
/* 3020C 8002F60C A6180088 */  sh         $t8, 0x88($s0)
/* 30210 8002F610 86B9008C */  lh         $t9, 0x8c($s5)
/* 30214 8002F614 C626012C */  lwc1       $f6, 0x12c($s1)
/* 30218 8002F618 44998000 */  mtc1       $t9, $f16
/* 3021C 8002F61C 460A3202 */  mul.s      $f8, $f6, $f10
/* 30220 8002F620 468084A0 */  cvt.s.w    $f18, $f16
/* 30224 8002F624 46124100 */  add.s      $f4, $f8, $f18
/* 30228 8002F628 4448F800 */  cfc1       $t0, $31
/* 3022C 8002F62C 00000000 */  nop
/* 30230 8002F630 35010003 */  ori        $at, $t0, 3
/* 30234 8002F634 38210002 */  xori       $at, $at, 2
/* 30238 8002F638 44C1F800 */  ctc1       $at, $31
/* 3023C 8002F63C 00000000 */  nop
/* 30240 8002F640 460021A4 */  cvt.w.s    $f6, $f4
/* 30244 8002F644 440F3000 */  mfc1       $t7, $f6
/* 30248 8002F648 44C8F800 */  ctc1       $t0, $31
/* 3024C 8002F64C A60F008C */  sh         $t7, 0x8c($s0)
/* 30250 8002F650 86290090 */  lh         $t1, 0x90($s1)
/* 30254 8002F654 00000000 */  nop
/* 30258 8002F658 A6090090 */  sh         $t1, 0x90($s0)
.L8002F65C:
/* 3025C 8002F65C 8E2C0158 */  lw         $t4, 0x158($s1)
/* 30260 8002F660 2694FFFF */  addiu      $s4, $s4, -1
/* 30264 8002F664 00145400 */  sll        $t2, $s4, 0x10
/* 30268 8002F668 026C1021 */  addu       $v0, $s3, $t4
/* 3026C 8002F66C 304DFFFF */  andi       $t5, $v0, 0xffff
/* 30270 8002F670 000AA403 */  sra        $s4, $t2, 0x10
/* 30274 8002F674 0681FFAF */  bgez       $s4, .L8002F534
/* 30278 8002F678 01A01025 */   or        $v0, $t5, $zero
.L8002F67C:
/* 3027C 8002F67C 8FBF003C */  lw         $ra, 0x3c($sp)
/* 30280 8002F680 8FB00018 */  lw         $s0, 0x18($sp)
/* 30284 8002F684 8FB1001C */  lw         $s1, 0x1c($sp)
/* 30288 8002F688 8FB20020 */  lw         $s2, 0x20($sp)
/* 3028C 8002F68C 8FB30024 */  lw         $s3, 0x24($sp)
/* 30290 8002F690 8FB40028 */  lw         $s4, 0x28($sp)
/* 30294 8002F694 8FB5002C */  lw         $s5, 0x2c($sp)
/* 30298 8002F698 8FB60030 */  lw         $s6, 0x30($sp)
/* 3029C 8002F69C 8FB70034 */  lw         $s7, 0x34($sp)
/* 302A0 8002F6A0 8FBE0038 */  lw         $fp, 0x38($sp)
/* 302A4 8002F6A4 03E00008 */  jr         $ra
/* 302A8 8002F6A8 27BD0040 */   addiu     $sp, $sp, 0x40
